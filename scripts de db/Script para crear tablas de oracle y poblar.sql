-- Crear usuario para conexi√≥n: 

-- USER SQL
CREATE USER admin_jcn IDENTIFIED BY "Prueba1234567!"
TEMPORARY TABLESPACE "TEMP";

-- QUOTAS
ALTER USER admin_jcn QUOTA UNLIMITED ON USERS;

-- ROLES
GRANT "RESOURCE" TO admin_jcn;
GRANT "CONNECT" TO admin_jcn;
ALTER USER admin_jcn DEFAULT ROLE "RESOURCE","CONNECT";





-- PARA BORRAR TABLAS 
-- DROP TABLE CORE_JUEGO;
-- DROP TABLE CORE_CATEGORIA;
-- DROP TABLE CORE_USUARIO;
-- DROP TABLA CORE_FAVORITO;
-- DROP TABLE CORE_RESENA;
-- DROP TABLE CORE_CONTACTO;

-- CREAR TABLA CATEGORIA

CREATE TABLE CORE_CATEGORIA (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nombre VARCHAR2(100) NOT NULL,
    titulo VARCHAR2(100) NOT NULL,
    lema VARCHAR2(255),
    descripcion VARCHAR2(500),
    imagen VARCHAR2(255)
);

-- CREAR TABLA JUEGO

CREATE TABLE CORE_JUEGO (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nombre VARCHAR2(100) NOT NULL,
    descripcion VARCHAR2(500),
    precio NUMBER(10) NOT NULL,
    categoria_id NUMBER,  -- Relaci√≥n con Categoria
    plataformas VARCHAR2(255),
    imagen VARCHAR2(255),

    -- Definir la relaci√≥n con Categoria
    CONSTRAINT fk_categoria
        FOREIGN KEY (categoria_id)
        REFERENCES CORE_CATEGORIA(id) ON DELETE CASCADE
);


-- CREAR TABLA USUARIO
CREATE TABLE CORE_USUARIO (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nombre_completo VARCHAR2(200) NOT NULL,
    nombre_usuario VARCHAR2(50) UNIQUE NOT NULL,
    correo_electronico VARCHAR2(100) UNIQUE NOT NULL,
    contrasena VARCHAR2(255) NOT NULL,
    fecha_nacimiento DATE NOT NULL,
    direccion_despacho VARCHAR2(255),
    rol VARCHAR2(20) CHECK (rol IN ('administrador', 'vendedor', 'cliente', 'invitado'))
);




-- CREAR TABLA CONTACTO

CREATE TABLE CORE_CONTACTO (
    id              NUMBER(19)     PRIMARY KEY,
    nombre          NVARCHAR2(100),
    email           NVARCHAR2(254),
    mensaje         NCLOB,
    fecha_creacion  TIMESTAMP(6)   NOT NULL,
    leido           NUMBER(1)      NOT NULL,
    respuesta       NCLOB
);


-- CREAR TABLA FAVORITO

CREATE TABLE CORE_FAVORITO (
    id          NUMBER(19)     PRIMARY KEY,
    juego_id    NUMBER(19)     NOT NULL,
    usuario_id  NUMBER(19)     NOT NULL,
    
    CONSTRAINT fk_favorito_juego FOREIGN KEY (juego_id) REFERENCES core_juego(id),
    CONSTRAINT fk_favorito_usuario FOREIGN KEY (usuario_id) REFERENCES core_usuario(id)
);


-- CREAR TABLA RESE√ëA
CREATE TABLE CORE_RESENA (
    id                   NUMBER(19)     PRIMARY KEY,
    puntuacion           NUMBER(11)     NOT NULL,
    comentario           NCLOB,
    fecha_creacion       TIMESTAMP(6)   NOT NULL,
    fecha_actualizacion  TIMESTAMP(6)   NOT NULL,
    juego_id             NUMBER(19)     NOT NULL,
    usuario_id           NUMBER(19)     NOT NULL,
    
    CONSTRAINT fk_resena_juego FOREIGN KEY (juego_id) REFERENCES core_juego(id),
    CONSTRAINT fk_resena_usuario FOREIGN KEY (usuario_id) REFERENCES core_usuario(id)
);




-- Insertar categorias en la tabla CATEGORIA

INSERT INTO CORE_CATEGORIA (ID, NOMBRE, TITULO, LEMA, DESCRIPCION, IMAGEN) 
VALUES (1, 'Carreras', 'Carreras', 'üèéÔ∏è Carreras: La velocidad lo es todo.', 
        'Compite en emocionantes circuitos, domina curvas cerradas y deja atr√°s a tus rivales en intensas carreras llenas de adrenalina.',
        '/static/img/carreras.jpg');

INSERT INTO CORE_CATEGORIA (ID, NOMBRE, TITULO, LEMA, DESCRIPCION, IMAGEN) 
VALUES (2, 'Cozy', 'Cozy', '‚òï Cozy: Rel√°jate y disfruta.', 
        'Juegos tranquilos con ambientaciones acogedoras, mec√°nicas relajantes y un ritmo pausado para desconectar del estr√©s.',
        '/static/img/cozy.jpg');

INSERT INTO CORE_CATEGORIA (ID, NOMBRE, TITULO, LEMA, DESCRIPCION, IMAGEN) 
VALUES (3, 'mundoabierto', 'Mundo Abierto', 'üåç Mundo Abierto: Explora sin l√≠mites.',
        'Avent√∫rate en vastos mundos llenos de secretos, desaf√≠os y personajes inolvidables. La historia la escribes t√∫.',
        '/static/img/mundo-abierto.jpg');

INSERT INTO CORE_CATEGORIA (ID, NOMBRE, TITULO, LEMA, DESCRIPCION, IMAGEN) 
VALUES (4, 'Shooters', 'Shooters', 'üéØ Shooters: Acci√≥n sin descanso.',
        'Enfr√©ntate a enemigos en intensos tiroteos, ya sea en combates t√°cticos, arenas fren√©ticas o guerras √©picas.',
        '/static/img/shooters.jpg');

INSERT INTO CORE_CATEGORIA (ID, NOMBRE, TITULO, LEMA, DESCRIPCION, IMAGEN) 
VALUES (5, 'Terror', 'Terror', 'üëª Terror: Sobrevive a la pesadilla.',
        'Sum√©rgete en historias escalofriantes, evade horrores indescriptibles y enfrenta el miedo en cada sombra.',
        '/static/img/terror.jpg');




-- Insertar juegos en la tabla JUEGO

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Crash Team Racing Nitro-Fueled', 
        'Revive la emoci√≥n de las carreras arcade con Crash y sus amigos. Derrapa a toda velocidad, usa √≠tems locos y domina los circuitos llenos de obst√°culos en este vibrante remake del cl√°sico de PlayStation.', 
        20000, 1, 'PS4, Xbox One, Nintendo Switch, PC', '/static/img/crashteamracing.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Mario Kart 8 Deluxe', 
        'Compite en pistas alocadas, usa √≠tems estrat√©gicos y disfruta de la mejor experiencia multijugador de carreras con Mario y sus amigos.', 
        49990, 1, 'Nintendo Switch', '/static/img/mariokart8deluxe.jpg');


INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Stardew Valley', 
        'En Stardew Valley, heredas una granja descuidada de tu abuelo y decides dejar atr√°s la vida en la ciudad para restaurarla. Con mec√°nicas de cultivo, crianza de animales, pesca, miner√≠a y relaciones con los habitantes del pueblo. Su pixel art encantador y la m√∫sica nost√°lgica lo convierten en un cl√°sico del g√©nero cozy.',
        14990, 2, 'PS4, Xbox One, Nintendo Switch, PC', '/static/img/stardewvalley.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Spiritfarer', 
        'En Spiritfarer, juegas como Stella, una gu√≠a de almas encargada de llevar a los esp√≠ritus al m√°s all√°. A bordo de tu barco, debes cuidar a estos entra√±ables personajes, completar sus √∫ltimas peticiones y ayudarlos a encontrar paz antes de despedirse. El juego combina mec√°nicas de gesti√≥n y exploraci√≥n con una narrativa emotiva y visuales pintados a mano. Es una experiencia conmovedora sobre la vida, la muerte y la importancia de las relaciones.', 
        29990, 2, 'PS4, Xbox One, Nintendo Switch, PC', '/static/img/spiritfarer.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Cyberpunk 2077', 
        'Sum√©rgete en Night City, una metr√≥polis futurista donde las decisiones cambian el curso de la historia. Personaliza a tu personaje, mejora tus implantes cibern√©ticos y descubre una narrativa profunda llena de acci√≥n y conspiraciones.', 
        59990, 3, 'PS4, Xbox One, PC', '/static/img/cyberpunk2077.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('The Legend of Zelda: Tears of the Kingdom', 
        'La √©pica secuela de Breath of the Wild ampl√≠a Hyrule con nuevas mec√°nicas, poderes y misterios en un mundo lleno de posibilidades. Descubre secretos ocultos en el cielo y la tierra mientras forjas tu propia aventura.', 
        69990, 3, 'Nintendo Switch', '/static/img/zeldatotk.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('DOOM Eternal', 
        'Acci√≥n fren√©tica y sin descanso. Enfr√©ntate a hordas de demonios con un arsenal brutal en este shooter que combina velocidad, estrategia y una banda sonora que te mantendr√° en constante adrenalina.', 
        39990, 4, 'PS4, Xbox One, PC', '/static/img/doometernal.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Splatoon 2', 
        'Un shooter √∫nico donde la tinta es tu mejor arma. Compite en equipos para cubrir el escenario con tu color, personaliza a tu Inkling y disfruta de batallas din√°micas llenas de estilo y diversi√≥n.', 
        49990, 4, 'Nintendo Switch', '/static/img/splatoon2.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Alan Wake 2', 
        'Un thriller psicol√≥gico oscuro e inquietante. Sigue a Alan en su lucha contra fuerzas sobrenaturales mientras la realidad y la ficci√≥n se entrelazan en una historia aterradora y envolvente.', 
        59999, 5, 'PS5, Xbox Series X/S, PC', '/static/img/alanwake2.jpg');

INSERT INTO CORE_Juego (nombre, descripcion, precio, categoria_id, plataformas, imagen)
VALUES ('Resident Evil 4 Remake', 
        'Una reimaginaci√≥n del cl√°sico de terror y acci√≥n. Acompa√±a a Leon S. Kennedy en su misi√≥n de rescate mientras enfrenta horrores inimaginables en un pueblo lleno de misterio y peligros.', 
        59999, 5, 'PS4, PS5, Xbox Series X/S, PC', '/static/img/residentevil4remake.jpg');


-- VER TABLAS

SELECT * FROM CORE_CATEGORIA;
SELECT * FROM CORE_JUEGO;
SELECT * FROM CORE_USUARIO;
SELECT * FROM CORE_FAVORITO;
SELECT * FROM CORE_CONTACTO;
SELECT * FROM CORE_RESENA;





